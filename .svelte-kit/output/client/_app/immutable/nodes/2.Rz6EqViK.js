import"../chunks/Bzak7iHL.js";import"../chunks/DuNL3mAW.js";import{h as $,ab as Ce,t as Pe,ak as De,al as Be,am as Ge,an as Me,f as x,ac as Se,B as T,ao as Oe,_ as Re,$ as he,a0 as je,a1 as I,a2 as w,a6 as d,a5 as o,b as a,a3 as S,a4 as Fe,s as b,m as g,ap as Y,a8 as l,a9 as Le,aq as m,a7 as Ve}from"../chunks/BGQfL9Iz.js";import{l as re,o as Ze,e as He,b as K,h as Je}from"../chunks/DUQFgvH5.js";import{p as we,i as Q}from"../chunks/BhTDTBTo.js";import{s as We,r as y}from"../chunks/3ZPUUM1Z.js";import{i as Ye}from"../chunks/D0iKcDUJ.js";function Ke(e,r,u){var n=e==null?"":""+e;return n===""?null:n}function ke(e,r,u,n,i,c){var t=e.__className;if($||t!==u||t===void 0){var f=Ke(u);(!$||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=u}return c}function Ie(e,r,u=!1){if(e.multiple){if(r==null)return;if(!De(r))return Be();for(var n of e.options)n.selected=r.includes(E(n));return}for(n of e.options){var i=E(n);if(Ge(i,r)){n.selected=!0;return}}(!u||r!==void 0)&&(e.selectedIndex=-1)}function Qe(e){var r=new MutationObserver(()=>{Ie(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Pe(()=>{r.disconnect()})}function ee(e,r,u=r){var n=!0;re(e,"change",i=>{var c=i?"[selected]":":checked",t;if(e.multiple)t=[].map.call(e.querySelectorAll(c),E);else{var f=e.querySelector(c)??e.querySelector("option:not([disabled])");t=f&&E(f)}u(t)}),Ce(()=>{var i=r();if(Ie(e,i,n),n&&i===void 0){var c=e.querySelector(":checked");c!==null&&(i=E(c),u(i))}e.__value=i,n=!1}),Qe(e)}function E(e){return"__value"in e?e.__value:e.value}function k(e,r,u=r){var n=Me(),i=new WeakSet;re(e,"input",c=>{var t=c?e.defaultValue:e.value;if(t=te(e)?ae(t):t,u(t),T!==null&&i.add(T),n&&t!==(t=r())){var f=e.selectionStart,_=e.selectionEnd;e.value=t??"",_!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(_,e.value.length))}}),($&&e.defaultValue!==e.value||x(r)==null&&e.value)&&(u(te(e)?ae(e.value):e.value),T!==null&&i.add(T)),Se(()=>{var c=r();if(e===document.activeElement){var t=Oe??T;if(i.has(t))return}te(e)&&c===ae(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function et(e,r,u=r){re(e,"change",n=>{var i=n?e.defaultChecked:e.checked;u(i)}),($&&e.defaultChecked!==e.checked||x(r)==null)&&u(e.checked),Se(()=>{var n=r();e.checked=!!n})}function te(e){var r=e.type;return r==="number"||r==="range"}function ae(e){return e===""?null:+e}function tt(e){return function(...r){var u=r[0];return u.preventDefault(),e==null?void 0:e.apply(this,r)}}const at="https://api.geargrab.co";async function N(e,r={}){const u=`${at}${e}`,n={headers:{"Content-Type":"application/json",...r.headers},...r};n.body&&typeof n.body=="object"&&(n.body=JSON.stringify(n.body));const i=await fetch(u,n);if(!i.ok)throw new Error(`API call failed: ${i.status} ${i.statusText}`);return i.json()}const rt={async filter(e){return N("/users",{method:"POST",body:{filter:e}})},async get(e){return N(`/users/${e}`)},async update(e,r){return N(`/users/${e}`,{method:"PUT",body:r})},async create(e){return N("/users",{method:"POST",body:e})}};var st=I('<div class="mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md"><div class="flex items-center"><svg class="w-5 h-5 text-yellow-400 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><h3 class="text-sm font-medium text-yellow-800">1099 Reporting Required</h3> <p class="text-sm text-yellow-700 mt-1"> </p></div></div></div>'),it=I("<div><p> </p></div>"),nt=I('<div><label for="business_name" class="block text-sm font-medium text-gray-700 mb-2">Business Name</label> <input type="text" id="business_name" placeholder="Enter business name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div>'),ot=I('<div class="max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg"><div class="mb-6"><h2 class="text-2xl font-bold text-gray-900 mb-2">Tax Information</h2> <p class="text-gray-600">Please provide your tax information for 1099 reporting compliance.</p></div> <!> <!> <form class="space-y-6"><div><label for="entity_type" class="block text-sm font-medium text-gray-700 mb-2">Entity Type</label> <select id="entity_type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Individual</option><option>Business</option></select></div> <!> <div><label for="tax_id_type" class="block text-sm font-medium text-gray-700 mb-2">Tax ID Type</label> <select id="tax_id_type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Select tax ID type</option><option>Social Security Number (SSN)</option><option>Employer Identification Number (EIN)</option><option>Individual Taxpayer Identification Number (ITIN)</option></select></div> <div><label for="tax_id_number" class="block text-sm font-medium text-gray-700 mb-2">Tax ID Number</label> <input type="text" id="tax_id_number" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><h3 class="text-lg font-medium text-gray-900 mb-3">Tax Address</h3> <div class="grid grid-cols-1 gap-4"><div><label for="street_address" class="block text-sm font-medium text-gray-700 mb-1">Street Address</label> <input type="text" id="street_address" placeholder="Enter street address" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="grid grid-cols-2 gap-4"><div><label for="city" class="block text-sm font-medium text-gray-700 mb-1">City</label> <input type="text" id="city" placeholder="Enter city" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label for="state" class="block text-sm font-medium text-gray-700 mb-1">State</label> <input type="text" id="state" placeholder="Enter state" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label for="zip_code" class="block text-sm font-medium text-gray-700 mb-1">ZIP Code</label> <input type="text" id="zip_code" placeholder="Enter ZIP code" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country</label> <select id="country" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option>United States</option></select></div></div></div></div> <div class="space-y-3"><div class="flex items-center"><input type="checkbox" id="backup_withholding" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"/> <label for="backup_withholding" class="ml-2 block text-sm text-gray-700">Subject to backup withholding</label></div></div> <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"> </button></form></div>');function dt(e,r){Re(r,!1);const u=g(),n=g();let i=we(r,"user",24,()=>({})),c=we(r,"onUpdate",8,null),t=g({tax_id_type:"",tax_id_number:"",entity_type:"individual",business_name:"",tax_address:{street_address:"",city:"",state:"",zip_code:"",country:"US"},backup_withholding:!1,tax_exempt:!1,tax_exempt_reason:""}),f=g(!1),_=g({type:"",text:""}),X=g(0);Ze(()=>{i()&&(b(t,{tax_id_type:i().tax_id_type||"",tax_id_number:i().tax_id_number||"",entity_type:i().entity_type||"individual",business_name:i().business_name||"",tax_address:i().tax_address||{street_address:"",city:"",state:"",zip_code:"",country:"US"},backup_withholding:i().backup_withholding||!1,tax_exempt:i().tax_exempt||!1,tax_exempt_reason:i().tax_exempt_reason||""}),b(X,i().annual_earnings||0))});function Xe(s,v){if(!s||!v)return!1;const p=v.replace(/[-\s]/g,"");switch(s){case"ssn":return/^\d{9}$/.test(p);case"ein":return/^\d{9}$/.test(p);case"itin":return/^9\d{8}$/.test(p);default:return!1}}function Te(s){switch(s){case"ssn":return"XXX-XX-XXXX";case"ein":return"XX-XXXXXXX";case"itin":return"9XX-XX-XXXX";default:return"Enter tax ID"}}async function Ee(){b(f,!0),b(_,{type:"",text:""});try{if(!a(t).tax_id_type||!a(t).tax_id_number){b(_,{type:"error",text:"Tax ID type and number are required."});return}if(!Xe(a(t).tax_id_type,a(t).tax_id_number)){b(_,{type:"error",text:"Invalid tax ID format."});return}if(a(t).entity_type==="business"&&!a(t).business_name){b(_,{type:"error",text:"Business name is required for business entities."});return}const s={...a(t),tax_id_verified:!1,tax_info_updated_at:new Date().toISOString(),tax_info_updated_by:i().id};await rt.update(i().id,s),b(_,{type:"success",text:"Tax information saved successfully."}),c()&&c()(s)}catch(s){console.error("Error saving tax information:",s),b(_,{type:"error",text:"Failed to save tax information. Please try again."})}finally{b(f,!1)}}he(()=>a(t),()=>{b(u,a(t).entity_type==="business")}),he(()=>a(X),()=>{b(n,a(X)>=600)}),je(),Ye();var U=ot(),se=o(d(U),2);{var Ne=s=>{var v=st(),p=d(v),h=o(d(p),2),ge=o(d(h),2),qe=d(ge);l(ge),l(h),l(p),l(v),w(ze=>K(qe,`Your annual earnings ($${ze??""}) exceed $600. Tax information is required for 1099 reporting.`),[()=>(a(X),x(()=>a(X).toLocaleString()))]),S(s,v)};Q(se,s=>{a(n)&&s(Ne)})}var ie=o(se,2);{var $e=s=>{var v=it(),p=d(v),h=d(p,!0);l(p),l(v),w(()=>{ke(v,1,`mb-4 p-4 rounded-md ${a(_),x(()=>a(_).type==="error"?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200")??""}`),ke(p,1,`text-sm ${a(_),x(()=>a(_).type==="error"?"text-red-700":"text-green-700")??""}`),K(h,(a(_),x(()=>a(_).text)))}),S(s,v)};Q(ie,s=>{a(_),x(()=>a(_).text)&&s($e)})}var A=o(ie,2),q=d(A),z=o(d(q),2);w(()=>{a(t),Y(()=>{})});var C=d(z);C.value=C.__value="individual";var ne=o(C);ne.value=ne.__value="business",l(z),l(q);var oe=o(q,2);{var Ue=s=>{var v=nt(),p=o(d(v),2);y(p),l(v),k(p,()=>a(t).business_name,h=>m(t,a(t).business_name=h)),S(s,v)};Q(oe,s=>{a(u)&&s(Ue)})}var P=o(oe,2),D=o(d(P),2);w(()=>{a(t),Y(()=>{})});var B=d(D);B.value=B.__value="";var G=o(B);G.value=G.__value="ssn";var M=o(G);M.value=M.__value="ein";var de=o(M);de.value=de.__value="itin",l(D),l(P);var O=o(P,2),R=o(d(O),2);y(R),l(O);var j=o(O,2),le=o(d(j),2),F=d(le),ue=o(d(F),2);y(ue),l(F);var L=o(F,2),V=d(L),ce=o(d(V),2);y(ce),l(V);var _e=o(V,2),ve=o(d(_e),2);y(ve),l(_e),l(L);var fe=o(L,2),Z=d(fe),pe=o(d(Z),2);y(pe),l(Z);var be=o(Z,2),H=o(d(be),2);w(()=>{a(t),Y(()=>{})});var me=d(H);me.value=me.__value="US",l(H),l(be),l(fe),l(le),l(j);var J=o(j,2),xe=d(J),ye=d(xe);y(ye),Le(2),l(xe),l(J);var W=o(J,2),Ae=d(W,!0);l(W),l(A),l(U),w(s=>{We(R,"placeholder",s),W.disabled=a(f),K(Ae,a(f)?"Saving...":"Save Tax Information")},[()=>(a(t),x(()=>Te(a(t).tax_id_type)))]),ee(z,()=>a(t).entity_type,s=>m(t,a(t).entity_type=s)),ee(D,()=>a(t).tax_id_type,s=>m(t,a(t).tax_id_type=s)),k(R,()=>a(t).tax_id_number,s=>m(t,a(t).tax_id_number=s)),k(ue,()=>a(t).tax_address.street_address,s=>m(t,a(t).tax_address.street_address=s)),k(ce,()=>a(t).tax_address.city,s=>m(t,a(t).tax_address.city=s)),k(ve,()=>a(t).tax_address.state,s=>m(t,a(t).tax_address.state=s)),k(pe,()=>a(t).tax_address.zip_code,s=>m(t,a(t).tax_address.zip_code=s)),ee(H,()=>a(t).tax_address.country,s=>m(t,a(t).tax_address.country=s)),et(ye,()=>a(t).backup_withholding,s=>m(t,a(t).backup_withholding=s)),He("submit",A,tt(Ee)),S(e,U),Fe()}var lt=I('<meta name="description" content="Rent and list outdoor gear with GearGrab"/>'),ut=I('<div class="container mx-auto px-4 py-8"><h1 class="text-3xl font-bold text-center mb-8 text-gray-900">GearGrab Tax Compliance</h1> <!></div>');function xt(e){let r=g({id:"user-123",tax_id_type:"ssn",tax_id_number:"123-45-6789",entity_type:"individual",business_name:"",tax_address:{street_address:"123 Main St",city:"Anytown",state:"CA",zip_code:"12345",country:"US"},backup_withholding:!1,tax_exempt:!1,tax_exempt_reason:"",annual_earnings:1e3});function u(c){console.log("Tax information updated:",c),b(r,{...a(r),...c})}var n=ut();Je(c=>{var t=lt();Ve.title="GearGrab - Gear Rental Marketplace",S(c,t)});var i=o(d(n),2);dt(i,{get user(){return a(r)},onUpdate:u}),l(n),S(e,n)}export{xt as component};
