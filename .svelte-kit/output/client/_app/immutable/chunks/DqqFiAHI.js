const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DW40sj98.js","./BgI6DO7J.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./Dp1pzeXC.js";import{d as h,w as c}from"./CAKyo-S9.js";import{b as g}from"./DDtYd4wb.js";const o=c(null),n=c(!0),e=c(null),y=h(o,t=>!!t);h(o,t=>(t==null?void 0:t.is_email_verified)||!1);let a=null;async function m(){n.set(!0),e.set(null);try{const{auth:t,waitForAuth:i}=await u(async()=>{const{auth:s,waitForAuth:r}=await import("./BgI6DO7J.js").then(l=>l.d);return{auth:s,waitForAuth:r}},[],import.meta.url);await i(),a=t.onAuthStateChanged(async s=>{try{if(s){console.log("Firebase user signed in:",s.email);const r=await s.getIdToken(),l=await g.auth.loginWithFirebase(r);o.set(l.user),e.set(null)}else console.log("Firebase user signed out"),o.set(null),typeof window<"u"&&localStorage.removeItem("auth_token")}catch(r){console.error("Auth state change error:",r),e.set(r.message),o.set(null)}finally{n.set(!1)}})}catch(t){console.error("Auth initialization error:",t),e.set(t.message),n.set(!1)}}async function b(){n.set(!0),e.set(null);try{const{signInWithGoogle:t}=await u(async()=>{const{signInWithGoogle:s}=await import("./DW40sj98.js");return{signInWithGoogle:s}},__vite__mapDeps([0,1]),import.meta.url);return await t()}catch(t){throw console.error("Google sign-in error:",t),e.set(t.message),n.set(!1),t}}async function p(){n.set(!0),e.set(null);try{const{signInWithGithub:t}=await u(async()=>{const{signInWithGithub:s}=await import("./DW40sj98.js");return{signInWithGithub:s}},__vite__mapDeps([0,1]),import.meta.url);return await t()}catch(t){throw console.error("GitHub sign-in error:",t),e.set(t.message),n.set(!1),t}}async function I(){n.set(!0),e.set(null);try{await g.auth.logout(),o.set(null)}catch(t){console.error("Sign-out error:",t),e.set(t.message)}finally{n.set(!1)}}function d(){a&&(a(),a=null)}m();window.addEventListener("beforeunload",d);export{p as a,I as b,e,y as i,n as l,b as s,o as u};
