{"version":3,"file":"base44Client-DiUgpmgT.js","sources":["../../../.svelte-kit/adapter-node/chunks/base44Client.js"],"sourcesContent":["const API_BASE_URL = process.env.VITE_API_URL || \"http://localhost:3001/api\";\nlet firebaseAuth = null;\nif (typeof window !== \"undefined\") {\n  import(\"./client.js\").then(({ auth }) => {\n    firebaseAuth = auth;\n  }).catch(console.error);\n}\nasync function apiCall(endpoint, options = {}) {\n  const url = `${API_BASE_URL}${endpoint}`;\n  let token = null;\n  if (typeof window !== \"undefined\") {\n    if (firebaseAuth?.currentUser) {\n      try {\n        token = await firebaseAuth.currentUser.getIdToken();\n      } catch (error) {\n        console.warn(\"Failed to get Firebase token:\", error);\n      }\n    }\n    if (!token) {\n      token = localStorage.getItem(\"auth_token\");\n    }\n  }\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...token && { \"Authorization\": `Bearer ${token}` },\n      ...options.headers\n    },\n    ...options\n  };\n  if (config.body && typeof config.body === \"object\") {\n    config.body = JSON.stringify(config.body);\n  }\n  try {\n    const response = await fetch(url, config);\n    if (response.status === 401) {\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"auth_token\");\n      }\n      throw new Error(\"Authentication required\");\n    }\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || `API call failed: ${response.status} ${response.statusText}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error(`API call to ${endpoint} failed:`, error);\n    throw error;\n  }\n}\nfunction createEntityAPI(entityName) {\n  const endpoint = `/${entityName.toLowerCase()}s`;\n  return {\n    async list(orderBy = \"-created_at\") {\n      const params = new URLSearchParams();\n      if (orderBy) params.set(\"order\", orderBy);\n      return apiCall(`${endpoint}?${params.toString()}`);\n    },\n    async filter(criteria, orderBy = \"-created_at\") {\n      return apiCall(`${endpoint}/search`, {\n        method: \"POST\",\n        body: { filter: criteria, order: orderBy }\n      });\n    },\n    async get(id) {\n      return apiCall(`${endpoint}/${id}`);\n    },\n    async create(data) {\n      return apiCall(endpoint, {\n        method: \"POST\",\n        body: data\n      });\n    },\n    async update(id, data) {\n      return apiCall(`${endpoint}/${id}`, {\n        method: \"PUT\",\n        body: data\n      });\n    },\n    async delete(id) {\n      return apiCall(`${endpoint}/${id}`, {\n        method: \"DELETE\"\n      });\n    }\n  };\n}\n({\n  entities: {\n    GearItem: createEntityAPI(\"gear_item\"),\n    User: createEntityAPI(\"user\"),\n    Rental: createEntityAPI(\"rental\"),\n    Message: createEntityAPI(\"message\"),\n    GuaranteeClaim: createEntityAPI(\"guarantee_claim\"),\n    CartItem: createEntityAPI(\"cart_item\"),\n    TransactionRecord: createEntityAPI(\"transaction_record\"),\n    TaxDocument: createEntityAPI(\"tax_document\"),\n    Review: createEntityAPI(\"review\"),\n    Notification: createEntityAPI(\"notification\")\n  }\n});\n"],"names":[],"mappings":"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"}