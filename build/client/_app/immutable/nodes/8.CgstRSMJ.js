import"../chunks/Bzak7iHL.js";import"../chunks/saGfK2NU.js";import{o as me,s as p,e as V}from"../chunks/_R8EZNUK.js";import{p as ue,f as v,h as pe,a as c,b as ve,$ as fe,d as l,m as y,g as e,c as t,r as a,e as ge,i as xe,s as r,t as H,u as m}from"../chunks/BXL6jbj8.js";import{i as M}from"../chunks/CFP_NBt-.js";import{i as he}from"../chunks/L1SVMyTv.js";import{s as ye,a as be}from"../chunks/BtazKlE4.js";import{p as _e}from"../chunks/BOdDEnX7.js";import{g as J}from"../chunks/5CZu6JCa.js";import{b as we}from"../chunks/XSCeTUk_.js";var ke=v('<meta name="description" content="Your rental payment was successful"/>'),$e=v('<div class="flex justify-center items-center py-12"><svg class="animate-spin h-8 w-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="ml-2 text-gray-600">Confirming payment...</span></div>'),je=v('<div class="bg-red-50 border border-red-200 rounded-md p-6 text-center"><svg class="mx-auto h-12 w-12 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <h3 class="mt-2 text-lg font-medium text-red-800">Error</h3> <p class="mt-1 text-red-600"> </p></div>'),Ce=v('<div class="bg-gray-50 rounded-lg p-6 mb-8 text-left"><h2 class="text-lg font-semibold text-gray-900 mb-4">Rental Confirmation</h2> <div class="space-y-3"><div class="flex justify-between"><span class="text-gray-600">Item:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Rental Period:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Duration:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Total Paid:</span> <span class="font-medium text-green-600"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Status:</span> <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"> </span></div></div></div>'),ze=v(`<div class="bg-white rounded-lg shadow-md p-8 text-center"><div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6"><svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-2xl font-bold text-gray-900 mb-2">Payment Successful!</h1> <p class="text-gray-600 mb-8">Your rental has been confirmed and payment processed.</p> <!> <div class="bg-blue-50 rounded-lg p-6 mb-8 text-left"><h3 class="text-lg font-semibold text-blue-900 mb-3">What's Next?</h3> <ul class="space-y-2 text-blue-800"><li class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> You'll receive a confirmation email with rental details</li> <li class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> The gear owner will contact you about pickup/delivery</li> <li class="flex items-start"><svg class="h-5 w-5 text-blue-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> You can track your rental status in your dashboard</li></ul></div> <div class="flex flex-col sm:flex-row gap-4 justify-center"><button class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">View My Rentals</button> <button class="inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">Browse More Gear</button></div></div>`),Se=v('<div class="min-h-screen bg-gray-50 py-8"><div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"><!></div></div>');function Fe(W,q){ue(q,!1);const[K,Q]=be(),B=()=>ye(_e,"$page",K);let s=y(null),i=y(null),x=y(!0),f=y(null);const b=B().url.searchParams.get("rental_id"),L=B().url.searchParams.get("payment_intent");me(async()=>{if(!b||!L){l(f,"Missing payment information"),l(x,!1);return}await P()});async function P(){try{l(x,!0),l(f,null);const n=await we.entities.Rental.get(b);l(s,n.rental);const o=await fetch(`/api/payments/rental/${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!o.ok)throw new Error("Failed to load payment status");l(i,await o.json()),e(i).payment_status==="succeeded"&&e(i).rental_status==="pending"&&(await fetch("/api/payments/confirm-payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({payment_intent_id:L})}),await P())}catch(n){console.error("Failed to load payment status:",n),l(f,n.message)}finally{l(x,!1)}}he();var _=Se();pe(n=>{var o=ke();fe.title="Payment Successful - GearGrab",c(n,o)});var I=t(_),U=t(I);{var X=n=>{var o=$e();c(n,o)},Z=n=>{var o=ge(),ee=xe(o);{var te=u=>{var d=je(),g=r(t(d),4),w=t(g,!0);a(g),a(d),H(()=>p(w,e(f))),c(u,d)},ae=u=>{var d=ze(),g=r(t(d),6);{var w=k=>{var $=Ce(),T=r(t($),2),j=t(T),Y=r(t(j),2),re=t(Y,!0);a(Y),a(j);var C=r(j,2),A=r(t(C),2),ne=t(A);a(A),a(C);var z=r(C,2),F=r(t(z),2),oe=t(F);a(F),a(z);var S=r(z,2),G=r(t(S),2),le=t(G);a(G),a(S);var E=r(S,2),N=r(t(E),2),ie=t(N,!0);a(N),a(E),a(T),a($),H((h,de,ce)=>{p(re,(e(s),m(()=>e(s).gear_title))),p(ne,`${h??""} - 
                  ${de??""}`),p(oe,`${e(s),m(()=>e(s).total_days)??""} day${e(s),m(()=>e(s).total_days!==1?"s":"")??""}`),p(le,`$${ce??""}`),p(ie,(e(i),m(()=>{var O;return((O=e(i))==null?void 0:O.rental_status)||"Confirmed"})))},[()=>(e(s),m(()=>new Date(e(s).start_date).toLocaleDateString())),()=>(e(s),m(()=>new Date(e(s).end_date).toLocaleDateString())),()=>(e(i),e(s),m(()=>{var h;return(((h=e(i))==null?void 0:h.transaction_amount)||e(s).total_amount).toFixed(2)}))]),c(k,$)};M(g,k=>{e(s)&&k(w)})}var R=r(g,4),D=t(R),se=r(D,2);a(R),a(d),V("click",D,()=>J("/dashboard/rentals")),V("click",se,()=>J("/browse")),c(u,d)};M(ee,u=>{e(f)?u(te):u(ae,!1)},!0)}c(n,o)};M(U,n=>{e(x)?n(X):n(Z,!1)})}a(I),a(_),c(W,_),ve(),Q()}export{Fe as component};
